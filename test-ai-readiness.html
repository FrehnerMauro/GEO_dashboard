<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>AI Readiness Test</title>
</head>
<body>
  <h1>AI Readiness Function Test</h1>
  <div>
    <input type="text" id="aiReadinessUrl" placeholder="example.com" value="example.com">
    <button onclick="testStartAIReadiness()">Test startAIReadiness</button>
  </div>
  <div id="results" style="margin-top: 20px; padding: 20px; background: #f0f0f0; border-radius: 8px;">
    <h2>Test Results:</h2>
    <pre id="output"></pre>
  </div>

  <script>
    // Simulate the function from routes.ts
    window.startAIReadiness = async function() {
      console.log('startAIReadiness called');
      const urlInput = document.getElementById('aiReadinessUrl');
      const url = urlInput?.value?.trim();
      
      if (!url) {
        alert('Bitte geben Sie eine URL ein.');
        return;
      }
      
      // Auto-add https:// if missing
      let websiteUrl = url;
      if (!websiteUrl.match(/^https?:\/\//i)) {
        websiteUrl = 'https://' + websiteUrl;
      }
      
      // Validate URL
      try {
        new URL(websiteUrl);
      } catch (e) {
        alert('Ungültige URL. Bitte geben Sie eine gültige URL ein.');
        return;
      }
      
      // Update input field with normalized URL
      if (urlInput) {
        urlInput.value = websiteUrl;
      }
      
      const output = document.getElementById('output');
      if (output) {
        output.textContent = '✅ Function executed successfully!\n' +
          'Original URL: ' + url + '\n' +
          'Normalized URL: ' + websiteUrl;
      }
      
      return { success: true, websiteUrl };
    };
    
    async function testStartAIReadiness() {
      const output = document.getElementById('output');
      output.textContent = 'Testing...\n';
      
      try {
        const result = await window.startAIReadiness();
        output.textContent += '\nResult: ' + JSON.stringify(result, null, 2);
      } catch (error) {
        output.textContent += '\n❌ Error: ' + error.message + '\n' + error.stack;
      }
    }
  </script>
</body>
</html>

